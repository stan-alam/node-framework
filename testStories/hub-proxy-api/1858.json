{
    "id" : "1858",
    "name" : "Use stored credentials for EPAs",
    "testCases" : [
      {
        "testCaseId": 1,
        "name": "Make Proxy privileged call with stored credentials on UI",
        "steps": [
          {
            "id": 1,
            "method": "deleteApplications",
            "type": "hub-configuration-api",
            "params": {
              "action": "deleteApplications",
              "applications": ["1858pubApp"]
            }
          },
          {
            "id": 2,
            "method": "createApplications",
            "type": "hub-configuration-api",
            "params": {
              "action": "createApplications",
              "applications": ["1858PubApp"]
            }
          },
          {
            "id": 3,
            "method": "addResource",
            "type": "hub-configuration-api",
            "params": {
              "action": "addResource",
              "application": "1858PubApp",
              "resources": "proxyAutomationResource"
            }
          },
          {
            "id": 4,
            "method": "addCredentials",
            "type": "hub-configuration-api",
            "params": {
              "action": "addEPACredentials",
              "username":"epausername",
              "password" :"epapassword",
              "title": "EPA credentials3",
              "sharedData": {
                "key": "appId",
                "sharelocation": {
                  "step": 1,
                  "value": "[0].body.id"
                }
              }
            }
          },
          {
            "id": 5,
            "method": "getTenantIdFromUItoken",
            "type": "hub-proxy-api",
            "params": {
              "action": "getTenantIdFromUItoken"
             }
          },
           {
            "id": 6,
            "method": "switchUser",
            "type": "hub-admin-ui",
            "params": {
              "action": "switchUser",
              "username":"curtis",
              "password":"Demo99!?"
             }
          },
          {
            "id": 7,
            "method": "createApplications",
            "type": "hub-configuration-api",
            "params": {
              "action": "createApplications",
              "applications": ["1858SubApp"]
            }
          },
          {
            "id": 8,
            "method": "getEPAccessToken",
            "type": "hub-proxy-api",
            "params": {
              "action": "getEPAccessToken",
               "sharedData": {
                  "key": "APIKey",
                  "sharelocation": {
                  "step": 6,
                  "value": "[0].body.apiKey"
                  }
               }
            }
          }
       ],
      "validation":[
           {
             "name": "EIH-1858 -Make Proxy privileged call with stored credentials on UI",
             "action": "epaRequest",
             "type": "hub-proxy-api",
             "resource":"proxyAutomationResource",
             "test": {
               "action": "equal",
               "value": 200
             }
           }
        ]
     },
     {
        "testCaseId": 2,
        "name": "Make Proxy privileged call without stored credentials on UI",
        "steps": [
         {
            "id": 1,
            "method": "switchUser",
            "type": "hub-admin-ui",
            "params": {
              "action": "switchUser",
              "username":"aakoepke@ellucian.me.sandbox",
              "password":"Demo99!?"
             }
          },
          {
            "id": 2,
            "method": "deleteApplications",
            "type": "hub-configuration-api",
            "params": {
              "action": "deleteApplications",
              "applications": ["1858pubApp"]
            }
          },
          {
            "id": 3,
            "method": "createApplications",
            "type": "hub-configuration-api",
            "params": {
              "action": "createApplications",
              "applications": ["1858PubApp"]
            }
          },
          {
            "id": 4,
            "method": "addResource",
            "type": "hub-configuration-api",
            "params": {
              "action": "addResource",
              "application": "1858PubApp",
              "resources": "proxyAutomationResource"
            }
          },
         {
            "id": 5,
            "method": "getTenantIdFromUItoken",
            "type": "hub-proxy-api",
            "params": {
              "action": "getTenantIdFromUItoken"
             }
          },
           {
            "id": 6,
            "method": "switchUser",
            "type": "hub-admin-ui",
            "params": {
              "action": "switchUser",
              "username":"curtis",
              "password":"Demo99!?"
             }
          },
          {
            "id": 7,
            "method": "createApplications",
            "type": "hub-configuration-api",
            "params": {
              "action": "createApplications",
              "applications": ["1858SubApp"]
            }
          },
          {
            "id": 8,
            "method": "getEPAccessToken",
            "type": "hub-proxy-api",
            "params": {
              "action": "getEPAccessToken",
               "sharedData": {
                  "key": "APIKey",
                  "sharelocation": {
                  "step": 6,
                  "value": "[0].body.apiKey"
                  }
               }
            }
          }
       ],
      "validation":[
           {
             "name": "EIH-1858 -Make Proxy privileged call without stored credentials on UI",
             "action": "epaRequest",
             "type": "hub-proxy-api",
             "resource":"proxyAutomationResource",
             "test": {
               "action": "equal",
               "value": 417
             }
           }
        ]
     }

   ]
}